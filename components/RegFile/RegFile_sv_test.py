import random

from pymtl import *
from pclib.test import run_test_vector_sim
from RegFile import regfile as RegFile_sv

def test_rw( dump_vcd ):
	run_test_vector_sim( RegFile_sv(dtype=16,nregs=16), [
		('rX_address  rX* rY_address  rY* rZ_address  rZ clk_en'),
		[       0x0, 0x0,       0x0, 0x0,       0x0, 0x0, 1],
		[       0x0, 0x0,       0x0, 0x0,       0x0, 0xF, 0],
		[       0x0, 0x0,       0x0, 0x0,       0x1, 0xF, 1],
		[       0x1, 0xF,       0x0, 0x0,       0x2, 0xE, 1],
		[       0x0, 0x0,       0x2, 0xE,       0x3, 0xD, 1],
		[       0x3, 0xD,       0x0, 0x0,       0x4, 0xC, 1],
		[       0x0, 0x0,       0x4, 0xC,       0x5, 0xB, 1],
		[       0x5, 0xB,       0x0, 0x0,       0x6, 0xA, 1],
		[       0x0, 0x0,       0x6, 0xA,       0x7, 0x9, 1],
		[       0x7, 0x9,       0x0, 0x0,       0x8, 0x8, 1],
		[       0x0, 0x0,       0x8, 0x8,       0x9, 0x7, 1],
		[       0x9, 0x7,       0x0, 0x0,       0xA, 0x6, 1],
		[       0x0, 0x0,       0xA, 0x6,       0xB, 0x5, 1],
		[       0xB, 0x5,       0x0, 0x0,       0xC, 0x4, 1],
		[       0x0, 0x0,       0xC, 0x4,       0xD, 0x3, 1],
		[       0xD, 0x3,       0x0, 0x0,       0xE, 0x2, 1],
		[       0x0, 0x0,       0xE, 0x2,       0xF, 0x1, 1],
		[       0xF, 0x1,       0x0, 0x0,       0x0, 0x0, 1],
	], dump_vcd)
