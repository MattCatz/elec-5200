\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage[margin=.75in]{geometry}  % Sets the margins

\usepackage{color}
 
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
 
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
 
\lstset{style=mystyle}

\title{5200 CPU 3}
\author{Matthew Cather}
\date{March 2019}

\begin{document}

\maketitle

For this section of the project I chose to model the CPU using the python library \texttt{py-MTL}. I chose this it allows me to focus and implement more complex ideas while still remaining productive. Ultimately I would like to transform this into a pipe-lined processor once the single cycle design is verified. One important note is that the \texttt{py-MTL} models have an implicit \texttt{Clock} and \texttt{Reset} signal.

Compared to the previous report, This design splits the \texttt{Program Counter} into a basic register and a register incrementer. This was done to simplify the hardware.

Models are presented in the following format, model and testbench together with the listing result at the end. This was done for brevity.

\tableofcontents
\clearpage

\section{Register}
\lstinputlisting[language=python,firstline=1,lastline=23]{components/Reg/Reg.py}
\subsection{Testbench}
\lstinputlisting[language=python,firstline=1,lastline=25]{components/Reg/Reg_test.py}

\subsection{Register Incrementer}
\lstinputlisting[language=python]{components/RegIncr/RegIncr.py}
\subsection{Testbench}
\lstinputlisting[language=python]{components/RegIncr/RegIncr_test.py}

\subsection{Register Shifter}
\lstinputlisting[language=python,firstline=25,lastline=37]{components/Reg/Reg.py}
\subsection{Testbench}
\lstinputlisting[language=python,firstline=27,lastline=35]{components/Reg/Reg.py}

\clearpage
\section{Multiplexers}
Utilizing the paramiterzation features of py-MTL I am able to use one generic Multiplexer model for all multiplexers required by the design:
\begin{itemize}
    \item Data Mux
    \item Operand Mux
    \item PC Mux
\end{itemize}
\lstinputlisting[language=python]{components/MUX/Mux.py}
\subsection{Testbench}
\lstinputlisting[language=python]{components/MUX/Mux_test.py}

\clearpage
\section{Register File}
\lstinputlisting[language=python]{components/RegFile/RegFile.py}
\subsection{Test-bench}
\lstinputlisting[language=python]{components/RegFile/RegFile_test.py}

\clearpage
\section{Arithmetic and Logic unit}
\lstinputlisting[language=python]{components/ALU/ALU.py}
\subsection{Test-bench}
\lstinputlisting[language=python]{components/ALU/ALU_test.py}

\section{PC Adder}

\section{Testbench Results}
\subsection{Register Model Test Results}
\lstinputlisting{reports/Reg_test.txt}
\subsection{Register Incrementer Model Test Results}
\lstinputlisting{reports/RegIncr_test.txt}
\subsection{Multiplexer Model Test Results}
\lstinputlisting{reports/Mux_test.txt}
\subsection{Register File Model Test Results}
\lstinputlisting{reports/RegFile_test.txt}
\subsection{ALU Model Test Results}
\lstinputlisting{reports/ALU_test.txt}

\end{document}
